<?php
error_reporting(E_ERROR | E_WARNING | E_PARSE);
session_start();
if (!isset($_SESSION['IDUSUARIO'])) {
    header('location: login.php');
}

include_once('../../configuracion/conexion.php');

class App {
    public $modules;
    public $mysql;

    public function __construct() {     
        self::connect();
        $this->modules = [
            (object)["id"=>8, "name"=>"Punto de Venta","active"=>self::has_permission(8), "src"=>"LOGICALERP/pos/escritorio.php", "icon"=>'M9.98062 6.28574C9.76763 6.28426 9.55847 6.34233 9.37672 6.45339C9.19563 6.56406 9.04894 6.72296 8.95307 6.91228L6.98869 10.8571H33.0113L31.048 6.91431C30.9521 6.72494 30.8044 6.56409 30.6233 6.45339C30.4415 6.34233 30.2324 6.28426 30.0194 6.28574L30.0114 6.28577L9.98062 6.28574ZM33.7143 13.1429H6.28571V16.5715H33.7143V13.1429ZM4 12C4 12 4 12 4 12.0001V16.5715C4 17.1777 4.24082 17.7591 4.66947 18.1877C5.09812 18.6164 5.6795 18.8572 6.28571 18.8572H33.7143C34.3205 18.8572 34.9019 18.6164 35.3305 18.1877C35.7592 17.7591 36 17.1777 36 16.5715V12.0001C36 12 36 12 36 12C36 11.8083 35.9528 11.6276 35.8694 11.4689L33.0916 5.89062L33.0892 5.8858C32.8017 5.31516 32.3604 4.83623 31.8152 4.50303C31.2712 4.1706 30.6453 3.99643 30.0079 4.00006H9.99215C9.3547 3.99643 8.72882 4.1706 8.18484 4.50303C7.63961 4.83623 7.19834 5.31516 6.91081 5.8858L4.13064 11.4689C4.04721 11.6276 4 11.8083 4 12ZM30.0079 4.00006H30.0114V5.14291L30.0035 4.00008L30.0079 4.00006ZM7.42857 22.2857C8.05975 22.2857 8.57143 22.7974 8.57143 23.4286V25.7143H21.1429V23.4286C21.1429 22.7974 21.6545 22.2857 22.2857 22.2857C22.9169 22.2857 23.4286 22.7974 23.4286 23.4286L23.4286 26.8571L23.4286 33.7143H31.4286V23.4286C31.4286 22.7974 31.9402 22.2857 32.5714 22.2857C33.2026 22.2857 33.7143 22.7974 33.7143 23.4286V33.7143C33.7143 34.3205 33.4735 34.9019 33.0448 35.3305C32.6162 35.7592 32.0348 36 31.4286 36H22.2857H8.57143C7.96522 36 7.38384 35.7592 6.95518 35.3305C6.52653 34.9019 6.28571 34.3205 6.28571 33.7143V26.8571V23.4286C6.28571 22.7974 6.79739 22.2857 7.42857 22.2857ZM8.57143 33.7143V28H21.1429V33.7143H8.57143Z'],
            (object)["id"=>9, "name"=>"Ventas","active"=>self::has_permission(9), "src"=>"LOGICALERP/ventas/index.php", "icon"=>'M27.4005 3.76766C27.6313 3.15513 28.3149 2.84565 28.9274 3.07642L34.0237 4.99642C34.6345 5.22652 34.9443 5.90712 34.7167 6.51882L32.8204 11.6151C32.5921 12.2286 31.9097 12.5409 31.2963 12.3126C30.6828 12.0843 30.3705 11.402 30.5988 10.7885L31.5006 8.36494L6.837 19.5815C6.24116 19.8525 5.53847 19.5891 5.2675 18.9933C4.99652 18.3975 5.25987 17.6948 5.85571 17.4238L30.517 6.20828L28.0917 5.29459C27.4792 5.06382 27.1697 4.3802 27.4005 3.76766ZM34.8148 36.2092C35.4694 36.2092 36 35.6786 36 35.024V18.4314C36 17.8028 35.7503 17.1998 35.3057 16.7553C34.8612 16.3108 34.2583 16.0611 33.6296 16.0611H30.0741C29.4454 16.0611 28.8425 16.3108 28.398 16.7553C27.9534 17.1998 27.7037 17.8028 27.7037 18.4314V35.024C27.7037 35.6786 28.2343 36.2092 28.8889 36.2092H34.8148ZM33.6296 18.4314V33.8388H30.0741V18.4314H33.6296ZM24.1481 35.024C24.1481 35.6786 23.6175 36.2092 22.963 36.2092H17.037C16.3825 36.2092 15.8519 35.6786 15.8519 35.024V21.987C15.8519 21.3583 16.1016 20.7554 16.5461 20.3109C16.9906 19.8663 17.5936 19.6166 18.2222 19.6166H21.7778C22.4064 19.6166 23.0093 19.8663 23.4539 20.3109C23.8984 20.7554 24.1481 21.3583 24.1481 21.987V35.024ZM21.7778 33.8388V21.987H18.2222V33.8388H21.7778ZM11.1111 36.2092C11.7657 36.2092 12.2963 35.6786 12.2963 35.024V25.5425C12.2963 24.9139 12.0466 24.311 11.602 23.8664C11.1575 23.4219 10.5546 23.1722 9.92593 23.1722H6.37037C5.74171 23.1722 5.1388 23.4219 4.69427 23.8664C4.24973 24.311 4 24.9139 4 25.5425V35.024C4 35.6786 4.53063 36.2092 5.18518 36.2092H11.1111ZM9.92593 25.5425V33.8388H6.37037V25.5425H9.92593Z'],
            (object)["id"=>10, "name"=>"Compras","active"=>self::has_permission(10), "src"=>"LOGICALERP/compras/index.php", "icon"=>'M29.8996 4.50493C30.2997 4.17832 30.8003 3.99995 31.3168 4H34.8796C35.4984 4 36 4.50161 36 5.12038C36 5.73915 35.4984 6.24076 34.8796 6.24076H31.3166C31.3124 6.26101 31.3077 6.28115 31.3025 6.30114L30.3681 9.86058L28.1383 21.0097C28.1374 21.0149 28.1363 21.0201 28.1353 21.0253L27.1942 25.7309L27.1933 25.7353C27.09 26.2414 26.815 26.6963 26.4148 27.023C26.0147 27.3496 25.5141 27.5279 24.9976 27.5279H24.9974H11.3514C10.7326 27.5279 10.231 27.0263 10.231 26.4075C10.231 25.7887 10.7326 25.2871 11.3514 25.2871H24.9976L24.9978 25.2871L25.67 21.9261H8.70673C7.10454 21.9261 5.72508 20.7952 5.41087 19.2241L4.06641 12.5018C3.65044 10.422 5.24124 8.48151 7.36228 8.48151H28.4135L29.1286 5.75707C29.2374 5.26521 29.5088 4.82393 29.8996 4.50493ZM12.7605 12.9965C13.3608 12.8464 13.9691 13.2114 14.1191 13.8117L14.6793 16.0524C14.8294 16.6527 14.4644 17.261 13.8641 17.4111C13.2638 17.5612 12.6556 17.1962 12.5055 16.5959L11.9453 14.3551C11.7952 13.7548 12.1602 13.1465 12.7605 12.9965ZM21.1466 12.9965C21.7469 13.1465 22.1119 13.7548 21.9618 14.3551L21.4016 16.5959C21.2515 17.1962 20.6432 17.5612 20.0429 17.4111C19.4427 17.261 19.0777 16.6527 19.2278 16.0524L19.7879 13.8117C19.938 13.2114 20.5463 12.8464 21.1466 12.9965ZM12.4718 30.8891C11.2342 30.8891 10.231 31.8923 10.231 33.1298C10.231 34.3674 11.2342 35.3706 12.4718 35.3706C13.7093 35.3706 14.7125 34.3674 14.7125 33.1298C14.7125 31.8923 13.7093 30.8891 12.4718 30.8891ZM21.4348 33.1298C21.4348 31.8923 22.438 30.8891 23.6756 30.8891C24.9131 30.8891 25.9163 31.8923 25.9163 33.1298C25.9163 34.3674 24.9131 35.3706 23.6756 35.3706C22.438 35.3706 21.4348 34.3674 21.4348 33.1298ZM6.26366 12.0624C6.125 11.3691 6.65527 10.7223 7.36228 10.7223H27.9107L26.1181 19.6853H8.70673C8.17267 19.6853 7.71285 19.3083 7.60811 18.7846L6.26366 12.0624Z'],
            (object)["id"=>11, "name"=>"Terceros","active"=>self::has_permission(11), "src"=>"LOGICALERP/terceros/index.php", "icon"=>'M6.2143 2.78571C5.9112 2.78571 5.62051 2.90612 5.40618 3.12045C5.19186 3.33477 5.07145 3.62546 5.07145 3.92857V24.5C5.07145 24.6228 5.05165 24.7449 5.0128 24.8614L3.38545 29.7435L10.5085 27.9627C10.5992 27.94 10.6923 27.9286 10.7857 27.9286H29.0714C29.3745 27.9286 29.6652 27.8081 29.8796 27.5938C30.0939 27.3795 30.2143 27.0888 30.2143 26.7857V3.92857C30.2143 3.62547 30.0939 3.33478 29.8796 3.12045C29.6652 2.90612 29.3745 2.78571 29.0714 2.78571H6.2143ZM3.78994 1.5042C4.43292 0.861223 5.30499 0.5 6.2143 0.5H29.0714C29.9807 0.5 30.8528 0.861223 31.4958 1.5042C32.1388 2.14719 32.5 3.01926 32.5 3.92857V26.7857C32.5 27.695 32.1388 28.5671 31.4958 29.2101C30.8528 29.853 29.9807 30.2143 29.0714 30.2143H10.9264L1.92006 32.4659C1.5154 32.567 1.08775 32.4397 0.804341 32.1336C0.520928 31.8276 0.426766 31.3914 0.558671 30.9957L2.78574 24.3145V3.92857C2.78574 3.01926 3.14696 2.14719 3.78994 1.5042ZM17.6429 6.21423C18.274 6.21423 18.7857 6.72591 18.7857 7.35709V14.2142C18.7857 14.8454 18.274 15.3571 17.6429 15.3571C17.0117 15.3571 16.5 14.8454 16.5 14.2142V7.35709C16.5 6.72591 17.0117 6.21423 17.6429 6.21423ZM17.6426 18.7858C16.3803 18.7858 15.3569 19.8091 15.3569 21.0715C15.3569 22.3338 16.3803 23.3572 17.6426 23.3572C18.905 23.3572 19.9284 22.3338 19.9284 21.0715C19.9284 19.8091 18.905 18.7858 17.6426 18.7858Z'],
            (object)["id"=>12, "name"=>"Contabilidad","active"=>self::has_permission(12), "src"=>"LOGICALERP/contabilidad/index.php", "icon"=>'M16.1429 6.28571C15.5117 6.28571 15 6.79739 15 7.42857V8.57143C15 9.20261 15.5117 9.71429 16.1429 9.71429H23C23.6312 9.71429 24.1429 9.20261 24.1429 8.57143V7.43068L15 7.42857H24.1429V7.42801C24.1426 6.79709 23.631 6.28571 23 6.28571H16.1429ZM23 4C24.4928 4 25.7628 4.95407 26.2335 6.28571H28.7143C29.6236 6.28571 30.4957 6.64694 31.1387 7.28992C31.7816 7.9329 32.1429 8.80497 32.1429 9.71428V32.5714C32.1429 33.4807 31.7816 34.3528 31.1387 34.9958C30.4957 35.6388 29.6236 36 28.7143 36H10.4286C9.51926 36 8.64719 35.6388 8.00421 34.9958C7.36122 34.3528 7 33.4807 7 32.5714V9.71428C7 8.80497 7.36122 7.9329 8.00421 7.28992C8.64719 6.64694 9.51926 6.28571 10.4286 6.28571H12.9094C13.38 4.95407 14.65 4 16.1429 4H23ZM23 12C24.8935 12 26.4286 10.465 26.4286 8.57143L28.7143 8.57143C29.0174 8.57143 29.3081 8.69184 29.5224 8.90616C29.7367 9.12049 29.8571 9.41118 29.8571 9.71428V32.5714C29.8571 32.8745 29.7367 33.1652 29.5224 33.3795C29.3081 33.5939 29.0174 33.7143 28.7143 33.7143H10.4286C10.1255 33.7143 9.83478 33.5939 9.62045 33.3795C9.40612 33.1652 9.28571 32.8745 9.28571 32.5714V9.71428C9.28571 9.41118 9.40612 9.12049 9.62045 8.90616C9.83478 8.69184 10.1255 8.57143 10.4286 8.57143L12.7143 8.57143C12.7143 10.465 14.2493 12 16.1429 12H23ZM13.8571 15.4286C13.226 15.4286 12.7143 15.9402 12.7143 16.5714C12.7143 17.2026 13.226 17.7143 13.8571 17.7143H25.2857C25.9169 17.7143 26.4286 17.2026 26.4286 16.5714C26.4286 15.9402 25.9169 15.4286 25.2857 15.4286H13.8571ZM12.7143 22.2857C12.7143 21.6545 13.226 21.1429 13.8571 21.1429H25.2857C25.9169 21.1429 26.4286 21.6545 26.4286 22.2857C26.4286 22.9169 25.9169 23.4286 25.2857 23.4286H13.8571C13.226 23.4286 12.7143 22.9169 12.7143 22.2857ZM13.8571 26.8571C13.226 26.8571 12.7143 27.3688 12.7143 28C12.7143 28.6312 13.226 29.1429 13.8571 29.1429H25.2857C25.9169 29.1429 26.4286 28.6312 26.4286 28C26.4286 27.3688 25.9169 26.8571 25.2857 26.8571H13.8571Z'],
            (object)["id"=>13, "name"=>"Panel de Control","active"=>self::has_permission(13), "src"=>"LOGICALERP/panel_de_control/index.php", "icon"=>'M7.42857 6.28571C6.79739 6.28571 6.28571 6.79739 6.28571 7.42857V10.8571H33.7143V7.42857C33.7143 6.79739 33.2026 6.28571 32.5714 6.28571H7.42857ZM4 7.42857V12V32.5714C4 34.465 5.53502 36 7.42857 36H32.5714C34.465 36 36 34.465 36 32.5714V12V7.42857C36 5.53502 34.465 4 32.5714 4H7.42857C5.53502 4 4 5.53502 4 7.42857ZM33.7143 32.5714V13.1429H6.28571V32.5714C6.28571 33.2026 6.79739 33.7143 7.42857 33.7143H32.5714C33.2026 33.7143 33.7143 33.2026 33.7143 32.5714ZM28.8081 20.8081C29.2544 20.3618 29.2544 19.6382 28.8081 19.1919C28.3618 18.7456 27.6382 18.7456 27.1919 19.1919L19.1919 27.1919C18.7456 27.6382 18.7456 28.3618 19.1919 28.8081C19.6382 29.2544 20.3618 29.2544 20.8081 28.8081L28.8081 20.8081ZM26.8571 28C26.8571 27.3688 27.3688 26.8571 28 26.8571H30.2857C30.9169 26.8571 31.4286 27.3688 31.4286 28C31.4286 28.6312 30.9169 29.1429 30.2857 29.1429H28C27.3688 29.1429 26.8571 28.6312 26.8571 28ZM21.1429 17.7143C21.1429 17.0831 20.6312 16.5714 20 16.5714C19.3688 16.5714 18.8571 17.0831 18.8571 17.7143V20C18.8571 20.6312 19.3688 21.1429 20 21.1429C20.6312 21.1429 21.1429 20.6312 21.1429 20V17.7143ZM11.9229 19.9232C12.3692 19.4769 13.0928 19.4769 13.5391 19.9232L15.162 21.546C15.6083 21.9924 15.6083 22.716 15.162 23.1623C14.7157 23.6086 13.9921 23.6086 13.5458 23.1623L11.9229 21.5394C11.4766 21.0931 11.4766 20.3695 11.9229 19.9232ZM9.71429 26.8571C9.0831 26.8571 8.57143 27.3688 8.57143 28C8.57143 28.6312 9.0831 29.1429 9.71429 29.1429H12C12.6312 29.1429 13.1429 28.6312 13.1429 28C13.1429 27.3688 12.6312 26.8571 12 26.8571H9.71429Z'],
            (object)["id"=>14, "name"=>"Inventario","active"=>self::has_permission(14), "src"=>"LOGICALERP/inventario/index.php", "icon"=>'M14.1471 7.28992C14.79 6.64694 15.6621 6.28571 16.5714 6.28571H26.5809C26.02 7.12526 25.7143 8.1183 25.7143 9.14286V12V30.2857C25.7143 31.195 25.3531 32.0671 24.7101 32.7101C24.0671 33.3531 23.195 33.7143 22.2857 33.7143L22.2839 33.7143C21.3752 33.7138 20.5039 33.3526 19.8613 32.7101C19.2184 32.0671 18.8571 31.195 18.8571 30.2857V29.1429C18.8571 28.5366 18.6163 27.9553 18.1877 27.5266C17.759 27.098 17.1776 26.8571 16.5714 26.8571H13.1429V9.71429C13.1429 8.80497 13.5041 7.9329 14.1471 7.28992ZM28 13.1429V30.2857C28 31.8012 27.398 33.2547 26.3263 34.3263C25.2552 35.3974 23.8028 35.9994 22.2881 36H22.2857L9.71429 36C8.19876 36 6.74531 35.398 5.67368 34.3263C4.60204 33.2547 4 31.8012 4 30.2857V29.1429C4 28.5366 4.24081 27.9553 4.66947 27.5266C5.09813 27.098 5.67951 26.8571 6.28571 26.8571H10.8571V9.71429C10.8571 8.19876 11.4592 6.74531 12.5308 5.67368C13.6025 4.60204 15.0559 4 16.5714 4H30.8571C32.2211 4 33.5292 4.54183 34.4937 5.50631C35.4582 6.47078 36 7.77889 36 9.14286V10.8571C36 11.4634 35.7592 12.0447 35.3305 12.4734C34.9019 12.902 34.3205 13.1429 33.7143 13.1429H28ZM30.8571 6.28571C30.0994 6.28571 29.3727 6.58673 28.8368 7.12255C28.301 7.65837 28 8.3851 28 9.14286V10.8571H33.7143V9.14286C33.7143 8.3851 33.4133 7.65837 32.8774 7.12255C32.3416 6.58673 31.6149 6.28571 30.8571 6.28571ZM6.28571 29.1429H12L16.5714 29.1429V30.2857C16.5714 31.5292 16.9768 32.731 17.7143 33.7143H9.71429C8.80497 33.7143 7.9329 33.3531 7.28992 32.7101C6.64694 32.0671 6.28571 31.195 6.28571 30.2857V29.1429ZM16.5714 13.1429C16.5714 12.5117 17.0831 12 17.7143 12H21.1429C21.774 12 22.2857 12.5117 22.2857 13.1429C22.2857 13.774 21.774 14.2857 21.1429 14.2857H17.7143C17.0831 14.2857 16.5714 13.774 16.5714 13.1429ZM17.7143 18.8571C17.0831 18.8571 16.5714 19.3688 16.5714 20C16.5714 20.6312 17.0831 21.1429 17.7143 21.1429H21.1429C21.774 21.1429 22.2857 20.6312 22.2857 20C22.2857 19.3688 21.774 18.8571 21.1429 18.8571H17.7143Z'],
            (object)["id"=>15, "name"=>"Activos Fijos","active"=>self::has_permission(15), "src"=>"LOGICALERP/activo_fijo/index.php", "icon"=>'M24.93 6.47451C22.072 4.71073 18.7465 3.85507 15.3925 4.02007C12.4376 4.02352 9.71372 4.55676 7.68408 5.4609C6.66741 5.91379 5.77475 6.48211 5.12078 7.16978C4.46148 7.86307 4 8.73061 4 9.73074V9.73079V9.73082V16.5836V23.4365C4 24.5125 4.53367 25.4288 5.26955 26.147C6.00188 26.8617 6.99965 27.4506 8.13256 27.9185C8.71557 28.1594 9.38341 27.8819 9.62422 27.2989C9.86503 26.7159 9.58762 26.0481 9.00461 25.8073C8.03596 25.4072 7.32052 24.9568 6.86502 24.5122C6.41306 24.0711 6.28429 23.7082 6.28429 23.4365V20.1029C6.83451 20.4671 7.4597 20.7877 8.13256 21.0657C8.71557 21.3065 9.38341 21.0291 9.62422 20.446C9.86503 19.863 9.58762 19.1952 9.00461 18.9544C8.03596 18.5543 7.32052 18.1039 6.86502 17.6593C6.41306 17.2182 6.28429 16.8553 6.28429 16.5836V13.25C6.83451 13.6143 7.4597 13.9349 8.13256 14.2128C8.71557 14.4536 9.38341 14.1762 9.62422 13.5932C9.86503 13.0102 9.58762 12.3423 9.00461 12.1015C8.03596 11.7014 7.32052 11.251 6.86502 10.8065C6.41306 10.3654 6.28429 10.0024 6.28429 9.73074C6.28429 9.47452 6.39674 9.14282 6.77608 8.74393C7.16075 8.33944 7.77143 7.92266 8.6136 7.5475C10.295 6.79849 12.6996 6.30433 15.4215 6.30433C15.4408 6.30433 15.4602 6.30383 15.4796 6.30285C18.3807 6.155 21.2583 6.89283 23.7304 8.41842C24.2672 8.74969 24.9709 8.58308 25.3021 8.04629C25.6334 7.50949 25.4668 6.80579 24.93 6.47451ZM15.421 16.5836C15.421 16.3245 15.5344 15.9916 15.914 15.5927C16.2992 15.1879 16.9106 14.7715 17.7535 14.3969C19.4363 13.6489 21.8412 13.1572 24.5582 13.1572C27.2752 13.1572 29.68 13.6489 31.3629 14.3969C32.2057 14.7715 32.8171 15.1879 33.2023 15.5927C33.5819 15.9916 33.6953 16.3245 33.6953 16.5836C33.6953 16.8428 33.5819 17.1757 33.2023 17.5745C32.8171 17.9793 32.2057 18.3958 31.3629 18.7704C29.68 19.5183 27.2752 20.01 24.5582 20.01C21.8412 20.01 19.4363 19.5183 17.7535 18.7704C16.9106 18.3958 16.2992 17.9793 15.914 17.5745C15.5344 17.1757 15.421 16.8428 15.421 16.5836ZM13.1367 16.5799L13.1367 16.5836V16.5836V23.4365V30.2893C13.1367 31.2876 13.5952 32.1548 14.2529 32.8488C14.9052 33.537 15.796 34.1057 16.8116 34.5589C18.8458 35.4664 21.5812 36 24.5582 36C27.5351 36 30.2706 35.4664 32.3047 34.5589C33.3204 34.1057 34.2112 33.537 34.8634 32.8488C35.5212 32.1548 35.9796 31.2876 35.9796 30.2893V23.4365V16.5836C35.9796 15.5812 35.5178 14.7122 34.857 14.018C34.2019 13.3296 33.3079 12.7616 32.2906 12.3095C30.2531 11.4039 27.5183 10.8729 24.5582 10.8729C21.5981 10.8729 18.8633 11.4039 16.8257 12.3095C15.8084 12.7616 14.9144 13.3296 14.2593 14.018C13.5994 14.7114 13.1379 15.5791 13.1367 16.5799ZM15.421 30.2893V26.9556C15.8456 27.2339 16.3136 27.4838 16.8116 27.706C18.8458 28.6136 21.5812 29.1471 24.5582 29.1471C27.5351 29.1471 30.2706 28.6136 32.3047 27.706C32.8027 27.4838 33.2708 27.2338 33.6953 26.9556V30.2893C33.6953 30.5473 33.5827 30.8794 33.2054 31.2775C32.8226 31.6815 32.2143 32.0979 31.374 32.4728C29.6961 33.2214 27.292 33.7157 24.5582 33.7157C21.8244 33.7157 19.4202 33.2214 17.7424 32.4728C16.902 32.0979 16.2938 31.6815 15.9109 31.2775C15.5336 30.8794 15.421 30.5473 15.421 30.2893ZM33.2054 24.4247C33.5827 24.0266 33.6953 23.6945 33.6953 23.4365V20.1015C33.2666 20.3823 32.7937 20.6342 32.2906 20.8578C30.2531 21.7633 27.5183 22.2943 24.5582 22.2943C21.5981 22.2943 18.8633 21.7633 16.8257 20.8578C16.3227 20.6342 15.8498 20.3823 15.421 20.1015V23.4365C15.421 23.6945 15.5336 24.0266 15.9109 24.4247C16.2938 24.8286 16.902 25.245 17.7424 25.62C19.4202 26.3685 21.8244 26.8629 24.5582 26.8629C27.292 26.8629 29.6961 26.3685 31.374 25.62C32.2143 25.245 32.8226 24.8286 33.2054 24.4247Z'],
            (object)["id"=>17, "name"=>"Empleados","active"=>self::has_permission(17), "src"=>"LOGICALERP/personal/index.php", "icon"=>'M11 10.7692C11 8.39017 12.9286 6.46154 15.3077 6.46154C17.6868 6.46154 19.6154 8.39017 19.6154 10.7692C19.6154 13.1483 17.6868 15.0769 15.3077 15.0769C12.9286 15.0769 11 13.1483 11 10.7692ZM15.3077 4C11.5691 4 8.53845 7.03069 8.53845 10.7692C8.53845 14.5078 11.5691 17.5385 15.3077 17.5385C19.0462 17.5385 22.0769 14.5078 22.0769 10.7692C22.0769 7.03069 19.0462 4 15.3077 4ZM8.34542 25.3455C10.1919 23.499 12.6963 22.4616 15.3077 22.4616C17.9191 22.4616 20.4235 23.499 22.27 25.3455C24.1165 27.192 25.1539 29.6964 25.1539 32.3078V33.5385H5.46154V32.3078C5.46154 29.6964 6.4989 27.192 8.34542 25.3455ZM15.3077 20.0001C12.0435 20.0001 8.91299 21.2968 6.60485 23.6049C4.2967 25.9131 3 29.0436 3 32.3078V34.7693C3 35.4491 3.55104 36.0001 4.23077 36.0001H26.3847C27.0644 36.0001 27.6154 35.4491 27.6154 34.7693V32.3078C27.6154 29.0436 26.3187 25.9131 24.0106 23.6049C21.7024 21.2968 18.5719 20.0001 15.3077 20.0001ZM23.9231 5.23077C23.9231 4.55104 24.4741 4 25.1539 4C26.9492 4 28.671 4.71319 29.9404 5.98267C31.2099 7.25214 31.9231 8.97393 31.9231 10.7692C31.9231 12.5646 31.2099 14.2863 29.9404 15.5558C28.671 16.8253 26.9492 17.5385 25.1539 17.5385C24.4741 17.5385 23.9231 16.9875 23.9231 16.3077C23.9231 15.628 24.4741 15.0769 25.1539 15.0769C26.2963 15.0769 27.392 14.6231 28.1999 13.8152C29.0077 13.0074 29.4616 11.9117 29.4616 10.7692C29.4616 9.62677 29.0077 8.53109 28.1999 7.72324C27.392 6.91539 26.2963 6.46154 25.1539 6.46154C24.4741 6.46154 23.9231 5.91051 23.9231 5.23077ZM29.5298 20.548C28.8945 20.3064 28.1835 20.6255 27.9418 21.2608C27.7002 21.8961 28.0193 22.6071 28.6546 22.8487C30.5184 23.5578 32.1231 24.816 33.2561 26.457C34.389 28.0978 34.9971 30.0439 34.9999 32.0378V33.5384H32.5383C31.8586 33.5384 31.3076 34.0894 31.3076 34.7692C31.3076 35.4489 31.8586 36 32.5383 36H36.2307C36.9104 36 37.4614 35.4489 37.4614 34.7692V32.0369V32.0352C37.4581 29.5426 36.698 27.1096 35.2817 25.0584C33.8654 23.0072 31.8596 21.4343 29.5298 20.548Z'],
            (object)["id"=>20, "name"=>"Nomina","active"=>self::has_permission(20), "src"=>"LOGICALERP/nomina/index.php", "icon"=>'M16.1429 6.28571C15.5117 6.28571 15 6.79739 15 7.42857V8.57143C15 9.20261 15.5117 9.71429 16.1429 9.71429H23C23.6312 9.71429 24.1429 9.20261 24.1429 8.57143V7.42857C24.1429 6.79739 23.6312 6.28571 23 6.28571H16.1429ZM28.7143 6.28571H26.2335C25.7628 4.95407 24.4928 4 23 4H16.1429C14.65 4 13.38 4.95407 12.9094 6.28571H10.4286C9.51926 6.28571 8.64719 6.64694 8.00421 7.28992C7.36122 7.9329 7 8.80497 7 9.71429V32.5714C7 33.4807 7.36122 34.3528 8.00421 34.9958C8.64719 35.6388 9.51926 36 10.4286 36H28.7143C29.6236 36 30.4957 35.6388 31.1387 34.9958C31.7816 34.3528 32.1429 33.4807 32.1429 32.5714V9.71429C32.1429 8.80497 31.7816 7.9329 31.1387 7.28992C30.4957 6.64694 29.6236 6.28571 28.7143 6.28571ZM23 12C24.8935 12 26.4286 10.465 26.4286 8.57143L28.7143 8.57143C29.0174 8.57143 29.3081 8.69184 29.5224 8.90616C29.7367 9.12049 29.8571 9.41118 29.8571 9.71429V32.5714C29.8571 32.8745 29.7367 33.1652 29.5224 33.3795C29.3081 33.5939 29.0174 33.7143 28.7143 33.7143H10.4286C10.1255 33.7143 9.83478 33.5939 9.62045 33.3795C9.40612 33.1652 9.28571 32.8745 9.28571 32.5714V9.71429C9.28571 9.41118 9.40612 9.12049 9.62045 8.90616C9.83478 8.69184 10.1255 8.57143 10.4286 8.57143L12.7143 8.57143C12.7143 10.465 14.2493 12 16.1429 12H23ZM25.1121 18.32C25.4466 17.7848 25.2839 17.0797 24.7486 16.7452C24.2134 16.4106 23.5083 16.5733 23.1738 17.1086L18.1189 25.1963L14.5429 22.5143C14.038 22.1356 13.3216 22.2379 12.9429 22.7429C12.5642 23.2478 12.6666 23.9642 13.1715 24.3429L17.7429 27.7714C17.9989 27.9634 18.3236 28.0393 18.6381 27.9806C18.9527 27.922 19.2282 27.7342 19.3978 27.4629L25.1121 18.32Z'],
            (object)["id"=>19, "name"=>"Informes","active"=>self::has_permission(19), "src"=>"LOGICALERP/informes/index.php", "icon"=>'M14.346 2.76923C13.6663 2.76923 13.1152 3.32026 13.1152 4C13.1152 4.67973 13.6663 5.23076 14.346 5.23076H30.346C30.6724 5.23076 30.9855 5.36043 31.2163 5.59125C31.4471 5.82206 31.5768 6.13511 31.5768 6.46153V29.8461C31.5768 30.5259 32.1278 31.0769 32.8075 31.0769C33.4873 31.0769 34.0383 30.5259 34.0383 29.8461V6.46153C34.0383 5.48227 33.6493 4.54312 32.9569 3.85068C32.2644 3.15824 31.3253 2.76923 30.346 2.76923H14.346ZM10.6537 10.1539C9.974 10.1539 9.42296 10.7049 9.42296 11.3846V33.5385C9.42296 34.2182 9.974 34.7692 10.6537 34.7692H25.423C26.1027 34.7692 26.6537 34.2182 26.6537 33.5385V11.3846C26.6537 10.7049 26.1027 10.1539 25.423 10.1539H10.6537ZM6.96143 11.3846C6.96143 9.34542 8.61453 7.69232 10.6537 7.69232H25.423C27.4622 7.69232 29.1153 9.34542 29.1153 11.3846V33.5385C29.1153 35.5777 27.4622 37.2308 25.423 37.2308H10.6537C8.61453 37.2308 6.96143 35.5777 6.96143 33.5385V11.3846ZM11.8844 15.0769C11.8844 14.3972 12.4354 13.8461 13.1152 13.8461H22.9613C23.6411 13.8461 24.1921 14.3972 24.1921 15.0769C24.1921 15.7566 23.6411 16.3077 22.9613 16.3077H13.1152C12.4354 16.3077 11.8844 15.7566 11.8844 15.0769ZM13.1152 19.9999C12.4354 19.9999 11.8844 20.551 11.8844 21.2307C11.8844 21.9104 12.4354 22.4615 13.1152 22.4615H22.9613C23.6411 22.4615 24.1921 21.9104 24.1921 21.2307C24.1921 20.551 23.6411 19.9999 22.9613 19.9999H13.1152ZM11.8844 27.3846C11.8844 26.7049 12.4354 26.1539 13.1152 26.1539H18.0382C18.718 26.1539 19.269 26.7049 19.269 27.3846C19.269 28.0644 18.718 28.6154 18.0382 28.6154H13.1152C12.4354 28.6154 11.8844 28.0644 11.8844 27.3846Z'],
            (object)["id"=>21, "name"=>"Mi ERP","active"=>self::has_permission(21), "src"=>"LOGICALERP/miapp/index.php", "icon"=>'M4 8.28571C4 7.02335 5.02335 6 6.28571 6H33.7143C34.9767 6 36 7.02335 36 8.28571V26.5714C36 27.8338 34.9767 28.8571 33.7143 28.8571H23.974L25.3455 32.2857H26.8571C27.4883 32.2857 28 32.7974 28 33.4286C28 34.0598 27.4883 34.5714 26.8571 34.5714H24.5994C24.5811 34.5719 24.5629 34.5719 24.5448 34.5714H15.4558C15.4377 34.5719 15.4195 34.5719 15.4012 34.5714H13.1429C12.5117 34.5714 12 34.0598 12 33.4286C12 32.7974 12.5117 32.2857 13.1429 32.2857H14.6551L16.0266 28.8571H6.28571C5.02335 28.8571 4 27.8338 4 26.5714V8.28571ZM21.5122 28.8571L22.8837 32.2857H17.1169L18.4884 28.8571H21.5122ZM22.3101 26.5714C22.2938 26.5711 22.2775 26.5711 22.2612 26.5714H17.7394C17.7231 26.5711 17.7068 26.5711 17.6905 26.5714H6.28571V8.28571H33.7143V26.5714H22.3101ZM27.7173 13.6098C28.1329 13.1347 28.0848 12.4127 27.6098 11.9971C27.1348 11.5815 26.4128 11.6296 25.9971 12.1046L18.695 20.4498L14.9715 17.6572C14.4665 17.2785 13.7502 17.3808 13.3715 17.8857C12.9928 18.3907 13.0951 19.107 13.6001 19.4857L18.1715 22.9143C18.6498 23.273 19.3236 23.2025 19.7173 22.7526L27.7173 13.6098Z'],
            (object)["id"=>25, "name"=>"CRM","active"=>self::has_permission(25), "src"=>"LOGICALERP/crm/index.php", "icon"=>'M11.703 6.3201C14.2083 4.8024 17.0814 4 20.0105 4C22.9396 4 25.8128 4.8024 28.318 6.3201C30.8233 7.83779 32.8649 10.0128 34.2212 12.6089C34.5137 13.1687 34.297 13.8596 33.7372 14.1521C33.1774 14.4445 32.4865 14.2278 32.194 13.668C31.0312 11.4422 29.2808 9.57751 27.1329 8.27632C24.9851 6.97513 22.5218 6.28719 20.0105 6.28719C17.4993 6.28719 15.036 6.97513 12.8881 8.27632C10.7403 9.57751 8.98989 11.4422 7.82703 13.668C7.53457 14.2278 6.84368 14.4445 6.28388 14.1521C5.72409 13.8596 5.50737 13.1687 5.79983 12.6089C7.15617 10.0128 9.19779 7.83779 11.703 6.3201ZM17.8784 13.1491C18.3327 13.2113 18.7058 13.5388 18.8264 13.9812L21.5975 24.1416L24.7778 19.3871C24.99 19.0698 25.3466 18.8793 25.7283 18.8793H34.8771C35.5087 18.8793 36.0207 19.3913 36.0207 20.0229C36.0207 20.6545 35.5087 21.1665 34.8771 21.1665H26.3392L22.1045 27.4974C21.8554 27.8697 21.412 28.0624 20.9699 27.9903C20.5278 27.9182 20.1685 27.5947 20.0506 27.1625L17.3267 17.1747L15.274 20.6096C15.0676 20.955 14.6948 21.1665 14.2924 21.1665H5.1436C4.512 21.1665 4 20.6545 4 20.0229C4 19.3913 4.512 18.8793 5.1436 18.8793H13.6435L16.7415 13.6954C16.9767 13.3019 17.4242 13.0868 17.8784 13.1491ZM7.82703 26.332C7.53457 25.7722 6.84368 25.5555 6.28388 25.8479C5.72409 26.1404 5.50737 26.8313 5.79983 27.3911C7.15617 29.9872 9.19779 32.1622 11.703 33.6799C14.2083 35.1976 17.0814 36 20.0105 36C22.9396 36 25.8128 35.1976 28.318 33.6799C30.8233 32.1622 32.8649 29.9872 34.2212 27.3911C34.5137 26.8313 34.297 26.1404 33.7372 25.8479C33.1774 25.5555 32.4865 25.7722 32.194 26.332C31.0312 28.5578 29.2808 30.4225 27.1329 31.7237C24.9851 33.0249 22.5218 33.7128 20.0105 33.7128C17.4993 33.7128 15.036 33.0249 12.8881 31.7237C10.7403 30.4225 8.98989 28.5578 7.82703 26.332Z'],
            (object)["id"=>26, "name"=>"Calendario Personal","active"=>self::has_permission(26), "src"=>"LOGICALERP/calendario/index.php", "icon"=>'M11.6154 3C12.2951 3 12.8462 3.55103 12.8462 4.23077V7.9231H23.9231C24.6028 7.9231 25.1539 8.47413 25.1539 9.15386C25.1539 9.8336 24.6028 10.3846 23.9231 10.3846H12.8462V14.0769C12.8462 14.7567 12.2951 15.3077 11.6154 15.3077C10.9357 15.3077 10.3846 14.7567 10.3846 14.0769V9.15386V4.23077C10.3846 3.55103 10.9357 3 11.6154 3ZM6.69231 7.9231C5.71305 7.9231 4.77389 8.31211 4.08145 9.00455C3.38901 9.69699 3 10.6361 3 11.6154V33.7693C3 34.7485 3.38901 35.6877 4.08145 36.3801C4.77389 37.0725 5.71305 37.4616 6.69231 37.4616H33.7692C34.7485 37.4616 35.6876 37.0725 36.3801 36.3801C37.0725 35.6877 37.4615 34.7485 37.4615 33.7693V11.6154C37.4615 10.6361 37.0725 9.69699 36.3801 9.00455C35.6876 8.31211 34.7485 7.9231 33.7692 7.9231H30.0769V4.23077C30.0769 3.55103 29.5259 3 28.8461 3C28.1664 3 27.6154 3.55103 27.6154 4.23077V14.0769C27.6154 14.7567 28.1664 15.3077 28.8461 15.3077C29.5259 15.3077 30.0769 14.7567 30.0769 14.0769V10.3846H33.7692C34.0957 10.3846 34.4087 10.5143 34.6395 10.7451C34.8703 10.9759 35 11.289 35 11.6154V33.7693C35 34.0957 34.8703 34.4087 34.6395 34.6395C34.4087 34.8703 34.0957 35 33.7692 35H6.69231C6.36589 35 6.05284 34.8703 5.82202 34.6395C5.59121 34.4087 5.46154 34.0957 5.46154 33.7693V11.6154C5.46154 11.289 5.59121 10.9759 5.82202 10.7451C6.05284 10.5143 6.36589 10.3846 6.69231 10.3846C7.37204 10.3846 7.92308 9.8336 7.92308 9.15386C7.92308 8.47413 7.37204 7.9231 6.69231 7.9231ZM22.6923 19C22.6923 18.3203 23.2433 17.7692 23.923 17.7692H26.3846C27.0643 17.7692 27.6153 18.3203 27.6153 19V28.8461H28.8461C29.5258 28.8461 30.0769 29.3972 30.0769 30.0769C30.0769 30.7566 29.5258 31.3077 28.8461 31.3077H26.3915L26.3846 31.3077L26.3776 31.3077H23.923C23.2433 31.3077 22.6923 30.7566 22.6923 30.0769C22.6923 29.3972 23.2433 28.8461 23.923 28.8461H25.1538V20.2308H23.923C23.2433 20.2308 22.6923 19.6797 22.6923 19ZM11.6154 17.7692C10.9357 17.7692 10.3846 18.3203 10.3846 19C10.3846 19.6797 10.9357 20.2308 11.6154 20.2308H15.3077L13.0923 23.1846C12.8126 23.5576 12.7676 24.0565 12.9761 24.4735C13.1841 24.8894 13.6086 25.1525 14.0734 25.1538L14.0743 25.1538L14.0911 25.1541C14.1084 25.1545 14.1377 25.1554 14.1771 25.1573C14.2562 25.161 14.3743 25.1688 14.518 25.1848C14.8115 25.2174 15.1814 25.2809 15.5339 25.3984C16.2962 25.6525 16.5385 25.9714 16.5385 26.3846C16.5385 26.4411 16.5424 26.4976 16.5501 26.5536C16.5935 26.8663 16.5638 27.1849 16.4633 27.4842C16.3628 27.7835 16.1943 28.0555 15.9711 28.2787C15.7478 28.502 15.4759 28.6705 15.1765 28.771C14.8772 28.8714 14.5587 28.9011 14.2459 28.8578C14.1899 28.85 14.1335 28.8461 14.077 28.8461H11.6154C10.9357 28.8461 10.3846 29.3972 10.3846 30.0769C10.3846 30.7567 10.9357 31.3077 11.6154 31.3077H13.9988C14.6591 31.3856 15.3288 31.3163 15.9598 31.1045C16.6198 30.883 17.2194 30.5116 17.7117 30.0193C18.2039 29.5271 18.5754 28.9274 18.7969 28.2675C19.0095 27.6339 19.0785 26.9613 18.9991 26.2985C18.9548 24.3106 17.3809 23.4193 16.3123 23.0632L16.2706 23.0494L18.7539 19.7385C19.0336 19.3655 19.0786 18.8665 18.8701 18.4496C18.6616 18.0326 18.2354 17.7692 17.7693 17.7692H11.6154Z'],
            (object)["id"=>18, "name"=>"Soporte","active"=>self::has_permission(18), "src"=>"LOGICALERP/soporte/index.php", "icon"=>'M20.8616 5.14286C20.8616 4.51168 20.35 4 19.7188 4C19.0876 4 18.5759 4.51168 18.5759 5.14286V13.2377C15.3328 13.7818 12.8616 16.6023 12.8616 20C12.8616 23.7872 15.9316 26.8572 19.7187 26.8572C23.5058 26.8572 26.5759 23.7872 26.5759 20C26.5759 16.6023 24.1047 13.7818 20.8616 13.2377V5.14286ZM15.1473 20C15.1473 17.4753 17.194 15.4286 19.7187 15.4286C22.2435 15.4286 24.2902 17.4753 24.2902 20C24.2902 22.5248 22.2435 24.5715 19.7187 24.5715C17.194 24.5715 15.1473 22.5248 15.1473 20ZM24.4154 8.28048C24.7023 7.71827 25.3907 7.49509 25.9529 7.78199C28.2048 8.93118 30.0953 10.6805 31.4154 12.8367C32.7354 14.9928 33.4338 17.4719 33.4334 20V29.1429C33.4334 30.0522 33.0722 30.9243 32.4292 31.5673C31.7862 32.2102 30.9141 32.5715 30.0048 32.5715H26.5762V34.8572C26.5762 35.4884 26.0646 36 25.4334 36C24.8022 36 24.2905 35.4884 24.2905 34.8572V31.4286C24.2905 30.7974 24.8022 30.2857 25.4334 30.2857H30.0048C30.3079 30.2857 30.5986 30.1653 30.813 29.951C31.0273 29.7367 31.1477 29.446 31.1477 29.1429V20C31.1481 17.8932 30.5661 15.827 29.466 14.0302C28.3659 12.2334 26.7905 10.7756 24.9139 9.81794C24.3517 9.53103 24.1285 8.84269 24.4154 8.28048ZM14.5237 9.81815C15.086 9.53148 15.3095 8.84323 15.0228 8.2809C14.7361 7.71857 14.0479 7.49511 13.4855 7.78178C11.2327 8.93028 9.3412 10.6793 8.02017 12.8355C6.69915 14.9918 6 17.4713 6 20C6 22.5287 6.69915 25.0082 8.02017 27.1645C9.21738 29.1186 10.8831 30.7383 12.8617 31.8796V34.8572C12.8617 35.4884 13.3734 36 14.0046 36C14.6358 36 15.1475 35.4884 15.1475 34.8572V31.2C15.1475 30.7704 14.9065 30.377 14.5237 30.1818C12.6463 29.2248 11.0701 27.7672 9.9692 25.9704C8.86834 24.1735 8.28572 22.1073 8.28572 20C8.28572 17.8927 8.86834 15.8265 9.9692 14.0296C11.0701 12.2327 12.6463 10.7752 14.5237 9.81815Z'],
        ];
    }

    private function connect(){
        global $server;
        $this->mysql = new mysqli($server->server_name, $server->user, $server->password, $_SESSION['BD']);
        if ($this->mysql->connect_errno) {
            echo "Fallo al conectar a MySQL en sesion: (" . $this->mysql->connect_errno . ") " . $this->mysql->connect_error;
        }

        if (!$this->mysql->set_charset("utf8")) {
            echo "Error cargando el conjunto de caracteres utf8: " . $this->mysql->error;
        }

    }

    public function has_permission($permission_id){
        $permission = (in_array($permission_id,$_SESSION["PERMISOS"]))? true : false ;
        return $permission;
    }

    public function load_modules(){
        $available_modules = array_filter($this->modules,function($element){
            return $element->active;
        });
        return $available_modules;
    }
}


header('Content-Type: application/json; charset=utf-8');
$app = new App();
switch ($_GET['method']) {
    case 'load_modules':
        $modules = $app->load_modules();
        echo json_encode($modules);
        break;    
    default:
        echo "Método no válido";
        break;
}